/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import assert from 'assert';
import { CancellationToken, CancellationTokenSource, } from '../../../../../base/common/cancellation.js';
import { DisposableStore } from '../../../../../base/common/lifecycle.js';
import { URI } from '../../../../../base/common/uri.js';
import { Range } from '../../../../common/core/range.js';
import { LanguageFeatureDebounceService } from '../../../../common/services/languageFeatureDebounce.js';
import { LanguageFeaturesService } from '../../../../common/services/languageFeaturesService.js';
import { IModelService } from '../../../../common/services/model.js';
import { createModelServices, createTextModel } from '../../../../test/common/testTextModel.js';
import { NullLogService } from '../../../../../platform/log/common/log.js';
import { MarkerSeverity } from '../../../../../platform/markers/common/markers.js';
import { OutlineElement, OutlineGroup, OutlineModel, OutlineModelService, } from '../../browser/outlineModel.js';
import { mock } from '../../../../../base/test/common/mock.js';
import { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';
suite('OutlineModel', function () {
    const disposables = new DisposableStore();
    const languageFeaturesService = new LanguageFeaturesService();
    teardown(function () {
        disposables.clear();
    });
    ensureNoDisposablesAreLeakedInTestSuite();
    test('OutlineModel#create, cached', async function () {
        const insta = createModelServices(disposables);
        const modelService = insta.get(IModelService);
        const envService = new (class extends mock() {
            constructor() {
                super(...arguments);
                this.isBuilt = true;
                this.isExtensionDevelopment = false;
            }
        })();
        const service = new OutlineModelService(languageFeaturesService, new LanguageFeatureDebounceService(new NullLogService(), envService), modelService);
        const model = createTextModel('foo', undefined, undefined, URI.file('/fome/path.foo'));
        let count = 0;
        const reg = languageFeaturesService.documentSymbolProvider.register({ pattern: '**/path.foo' }, {
            provideDocumentSymbols() {
                count += 1;
                return [];
            },
        });
        await service.getOrCreate(model, CancellationToken.None);
        assert.strictEqual(count, 1);
        // cached
        await service.getOrCreate(model, CancellationToken.None);
        assert.strictEqual(count, 1);
        // new version
        model.applyEdits([{ text: 'XXX', range: new Range(1, 1, 1, 1) }]);
        await service.getOrCreate(model, CancellationToken.None);
        assert.strictEqual(count, 2);
        reg.dispose();
        model.dispose();
        service.dispose();
    });
    test('OutlineModel#create, cached/cancel', async function () {
        const insta = createModelServices(disposables);
        const modelService = insta.get(IModelService);
        const envService = new (class extends mock() {
            constructor() {
                super(...arguments);
                this.isBuilt = true;
                this.isExtensionDevelopment = false;
            }
        })();
        const service = new OutlineModelService(languageFeaturesService, new LanguageFeatureDebounceService(new NullLogService(), envService), modelService);
        const model = createTextModel('foo', undefined, undefined, URI.file('/fome/path.foo'));
        let isCancelled = false;
        const reg = languageFeaturesService.documentSymbolProvider.register({ pattern: '**/path.foo' }, {
            provideDocumentSymbols(d, token) {
                return new Promise((resolve) => {
                    const l = token.onCancellationRequested((_) => {
                        isCancelled = true;
                        resolve(null);
                        l.dispose();
                    });
                });
            },
        });
        assert.strictEqual(isCancelled, false);
        const s1 = new CancellationTokenSource();
        service.getOrCreate(model, s1.token);
        const s2 = new CancellationTokenSource();
        service.getOrCreate(model, s2.token);
        s1.cancel();
        assert.strictEqual(isCancelled, false);
        s2.cancel();
        assert.strictEqual(isCancelled, true);
        reg.dispose();
        model.dispose();
        service.dispose();
    });
    function fakeSymbolInformation(range, name = 'foo') {
        return {
            name,
            detail: 'fake',
            kind: 16 /* SymbolKind.Boolean */,
            tags: [],
            selectionRange: range,
            range: range,
        };
    }
    function fakeMarker(range) {
        return {
            ...range,
            owner: 'ffff',
            message: 'test',
            severity: MarkerSeverity.Error,
            resource: null,
        };
    }
    test('OutlineElement - updateMarker', function () {
        const e0 = new OutlineElement('foo1', null, fakeSymbolInformation(new Range(1, 1, 1, 10)));
        const e1 = new OutlineElement('foo2', null, fakeSymbolInformation(new Range(2, 1, 5, 1)));
        const e2 = new OutlineElement('foo3', null, fakeSymbolInformation(new Range(6, 1, 10, 10)));
        const group = new OutlineGroup('group', null, null, 1);
        group.children.set(e0.id, e0);
        group.children.set(e1.id, e1);
        group.children.set(e2.id, e2);
        const data = [
            fakeMarker(new Range(6, 1, 6, 7)),
            fakeMarker(new Range(1, 1, 1, 4)),
            fakeMarker(new Range(10, 2, 14, 1)),
        ];
        data.sort(Range.compareRangesUsingStarts); // model does this
        group.updateMarker(data);
        assert.strictEqual(data.length, 0); // all 'stolen'
        assert.strictEqual(e0.marker.count, 1);
        assert.strictEqual(e1.marker, undefined);
        assert.strictEqual(e2.marker.count, 2);
        group.updateMarker([]);
        assert.strictEqual(e0.marker, undefined);
        assert.strictEqual(e1.marker, undefined);
        assert.strictEqual(e2.marker, undefined);
    });
    test('OutlineElement - updateMarker, 2', function () {
        const p = new OutlineElement('A', null, fakeSymbolInformation(new Range(1, 1, 11, 1)));
        const c1 = new OutlineElement('A/B', null, fakeSymbolInformation(new Range(2, 4, 5, 4)));
        const c2 = new OutlineElement('A/C', null, fakeSymbolInformation(new Range(6, 4, 9, 4)));
        const group = new OutlineGroup('group', null, null, 1);
        group.children.set(p.id, p);
        p.children.set(c1.id, c1);
        p.children.set(c2.id, c2);
        let data = [fakeMarker(new Range(2, 4, 5, 4))];
        group.updateMarker(data);
        assert.strictEqual(p.marker.count, 0);
        assert.strictEqual(c1.marker.count, 1);
        assert.strictEqual(c2.marker, undefined);
        data = [
            fakeMarker(new Range(2, 4, 5, 4)),
            fakeMarker(new Range(2, 6, 2, 8)),
            fakeMarker(new Range(7, 6, 7, 8)),
        ];
        group.updateMarker(data);
        assert.strictEqual(p.marker.count, 0);
        assert.strictEqual(c1.marker.count, 2);
        assert.strictEqual(c2.marker.count, 1);
        data = [fakeMarker(new Range(1, 4, 1, 11)), fakeMarker(new Range(7, 6, 7, 8))];
        group.updateMarker(data);
        assert.strictEqual(p.marker.count, 1);
        assert.strictEqual(c1.marker, undefined);
        assert.strictEqual(c2.marker.count, 1);
    });
    test('OutlineElement - updateMarker/multiple groups', function () {
        const model = new (class extends OutlineModel {
            constructor() {
                super(null);
            }
            readyForTesting() {
                this._groups = this.children;
            }
        })();
        model.children.set('g1', new OutlineGroup('g1', model, null, 1));
        model.children
            .get('g1')
            .children.set('c1', new OutlineElement('c1', model.children.get('g1'), fakeSymbolInformation(new Range(1, 1, 11, 1))));
        model.children.set('g2', new OutlineGroup('g2', model, null, 1));
        model.children
            .get('g2')
            .children.set('c2', new OutlineElement('c2', model.children.get('g2'), fakeSymbolInformation(new Range(1, 1, 7, 1))));
        model.children
            .get('g2')
            .children.get('c2')
            .children.set('c2.1', new OutlineElement('c2.1', model.children.get('g2').children.get('c2'), fakeSymbolInformation(new Range(1, 3, 2, 19))));
        model.children
            .get('g2')
            .children.get('c2')
            .children.set('c2.2', new OutlineElement('c2.2', model.children.get('g2').children.get('c2'), fakeSymbolInformation(new Range(4, 1, 6, 10))));
        model.readyForTesting();
        const data = [fakeMarker(new Range(1, 1, 2, 8)), fakeMarker(new Range(6, 1, 6, 98))];
        model.updateMarker(data);
        assert.strictEqual(model.children.get('g1').children.get('c1').marker.count, 2);
        assert.strictEqual(model.children.get('g2').children.get('c2').children.get('c2.1').marker.count, 1);
        assert.strictEqual(model.children.get('g2').children.get('c2').children.get('c2.2').marker.count, 1);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0bGluZU1vZGVsLnRlc3QuanMiLCJzb3VyY2VSb290IjoiZmlsZTovLy9Vc2Vycy95YXNoYXNuYWlkdS9LdmFudGNvZGUvS3ZhbnRrb2RlLXByb2plY3QvS3ZhbnRrb2RlL3NyYy8iLCJzb3VyY2VzIjpbInZzL2VkaXRvci9jb250cmliL2RvY3VtZW50U3ltYm9scy90ZXN0L2Jyb3dzZXIvb3V0bGluZU1vZGVsLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztnR0FHZ0c7QUFFaEcsT0FBTyxNQUFNLE1BQU0sUUFBUSxDQUFBO0FBQzNCLE9BQU8sRUFDTixpQkFBaUIsRUFDakIsdUJBQXVCLEdBQ3ZCLE1BQU0sNENBQTRDLENBQUE7QUFDbkQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHlDQUF5QyxDQUFBO0FBQ3pFLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQTtBQUN2RCxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sa0NBQWtDLENBQUE7QUFFeEQsT0FBTyxFQUFFLDhCQUE4QixFQUFFLE1BQU0sd0RBQXdELENBQUE7QUFDdkcsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sd0RBQXdELENBQUE7QUFDaEcsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHNDQUFzQyxDQUFBO0FBQ3BFLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxlQUFlLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQTtBQUMvRixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkNBQTJDLENBQUE7QUFDMUUsT0FBTyxFQUFXLGNBQWMsRUFBRSxNQUFNLG1EQUFtRCxDQUFBO0FBQzNGLE9BQU8sRUFDTixjQUFjLEVBQ2QsWUFBWSxFQUNaLFlBQVksRUFDWixtQkFBbUIsR0FDbkIsTUFBTSwrQkFBK0IsQ0FBQTtBQUN0QyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0seUNBQXlDLENBQUE7QUFFOUQsT0FBTyxFQUFFLHVDQUF1QyxFQUFFLE1BQU0sMENBQTBDLENB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